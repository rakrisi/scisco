!function(t){"use strict";t.fn.egemenerdMasonry=function(e){var c,s,u,r,a,o,d,n=t(this);c=window,s=window.document,r=[],a=[],o=[],d=function(e,t,n){e.dataset?e.dataset[t]=n:e.setAttribute("data-"+t,n)},(u={}).obtainGridSettings=function(e){var t=c.getComputedStyle(e,":before").getPropertyValue("content").slice(1,-1),n=t.match(/^\s*(\d+)(?:\s?\.(.+))?\s*$/),r=1,a=[];return n?(r=n[1],a=(a=n[2])?a.split("."):["column"]):(n=t.match(/^\s*\.(.+)\s+(\d+)\s*$/))&&(a=n[1],(r=n[2])&&(r=r.split("."))),{numberOfColumns:r,columnClasses:a}},u.addColumns=function(e,t){for(var n,r=u.obtainGridSettings(e),a=r.numberOfColumns,o=r.columnClasses,i=new Array(+a),c=s.createDocumentFragment(),l=a;0!=l--;)n="[data-columns] > *:nth-child("+a+"n-"+l+")",i.push(t.querySelectorAll(n));i.forEach(function(e){var t=s.createElement("div"),n=s.createDocumentFragment();t.className=o.join(" "),Array.prototype.forEach.call(e,function(e){n.appendChild(e)}),t.appendChild(n),c.appendChild(t)}),e.appendChild(c),d(e,"columns",a)},u.removeColumns=function(e){var t=s.createRange();t.selectNodeContents(e);var n=Array.prototype.filter.call(t.extractContents().childNodes,function(e){return e instanceof c.HTMLElement}),r=n.length,a=n[0].childNodes.length,o=new Array(a*r);Array.prototype.forEach.call(n,function(e,n){Array.prototype.forEach.call(e.children,function(e,t){o[t*r+n]=e})});var i=s.createElement("div");return d(i,"columns",0),o.filter(function(e){return!!e}).forEach(function(e){i.appendChild(e)}),i},u.recreateColumns=function(t){c.requestAnimationFrame(function(){u.addColumns(t,u.removeColumns(t));var e=new CustomEvent("columnsChange");t.dispatchEvent(e)})},u.mediaQueryChange=function(e){e.matches&&Array.prototype.forEach.call(r,u.recreateColumns)},u.getCSSRules=function(e){var t;try{t=e.sheet.cssRules||e.sheet.rules}catch(e){return[]}return t||[]},u.getStylesheets=function(){var n=Array.prototype.slice.call(s.querySelectorAll("style"));return n.forEach(function(e,t){"text/css"!==e.type&&""!==e.type&&n.splice(t,1)}),Array.prototype.concat.call(n,Array.prototype.slice.call(s.querySelectorAll("link[rel='stylesheet']")))},u.mediaRuleHasColumnsSelector=function(e){var t,n;try{t=e.length}catch(e){t=0}for(;t--;)if((n=e[t]).selectorText&&n.selectorText.match(/\[data-columns\](.*)::?before$/))return!0;return!1},u.scanMediaQueries=function(){var t=[];if(c.matchMedia){u.getStylesheets().forEach(function(e){Array.prototype.forEach.call(u.getCSSRules(e),function(e){try{e.media&&e.cssRules&&u.mediaRuleHasColumnsSelector(e.cssRules)&&t.push(e)}catch(e){}})});var n=a.filter(function(e){return-1===t.indexOf(e)});o.filter(function(e){return-1!==n.indexOf(e.rule)}).forEach(function(e){e.mql.removeListener(u.mediaQueryChange)}),o=o.filter(function(e){return-1===n.indexOf(e.rule)}),t.filter(function(e){return-1==a.indexOf(e)}).forEach(function(e){var t=c.matchMedia(e.media.mediaText);t.addListener(u.mediaQueryChange),o.push({rule:e,mql:t})}),a.length=0,a=t}},u.rescanMediaQueries=function(){u.scanMediaQueries(),Array.prototype.forEach.call(r,u.recreateColumns)},u.nextElementColumnIndex=function(e,t){var n,r,a=e.children,o=a.length,i=0,c=0;for(r=0;r<o;r++)n=a[r].children.length+(t[r].children||t[r].childNodes).length,0===i&&(i=n),n<i&&(c=r,i=n);return c},u.createFragmentsList=function(e){for(var t=new Array(e),n=0;n!==e;)t[n]=s.createDocumentFragment(),n++;return t},u.appendElements=function(n,e){var t=n.children,r=t.length,a=u.createFragmentsList(r);Array.prototype.forEach.call(e,function(e){var t=u.nextElementColumnIndex(n,a);a[t].appendChild(e)}),Array.prototype.forEach.call(t,function(e,t){e.appendChild(a[t])})},u.prependElements=function(e,t){var n=e.children,r=n.length,a=u.createFragmentsList(r),o=r-1;t.forEach(function(e){var t=a[o];t.insertBefore(e,t.firstChild),0===o?o=r-1:o--}),Array.prototype.forEach.call(n,function(e,t){e.insertBefore(a[t],e.firstChild)});for(var i=s.createDocumentFragment(),c=t.length%r;0!=c--;)i.appendChild(e.lastChild);e.insertBefore(i,e.firstChild)},u.registerGrid=function(e){if("none"!==c.getComputedStyle(e).display){var t=s.createRange();t.selectNodeContents(e);var n=s.createElement("div");n.appendChild(t.extractContents()),d(n,"columns",0),u.addColumns(e,n),r.push(e)}},u.init=function(){var e=s.createElement("style");e.innerHTML="[data-columns]::before{display:block;visibility:hidden;position:absolute;font-size:1px;}",s.head.appendChild(e);var t=n.find("[data-columns]");Array.prototype.forEach.call(t,u.registerGrid),u.scanMediaQueries(),n.css("opacity","1")},u.init(),u.appendElements,u.prependElements,u.registerGrid,u.recreateColumns,u.rescanMediaQueries,u.init,u.appendElements,u.prependElements,u.registerGrid,u.recreateColumns,u.rescanMediaQueries}}(jQuery);